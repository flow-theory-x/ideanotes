# serverless-cdk誕生物語 - shareNOTEから生まれた汎用基盤

*2025-07-19*

## きっかけ

朝の挨拶から始まった今日の会話。shareNOTEが「shareNOTE」としてローンチされ、Alexa skillがAmazon審査中という報告から、新たなプロジェクトが生まれた。

「このプロジェクトのCDK部分は単独で切り出しても有用なものになると思うがどうか」

この一言から、serverless-cdkプロジェクトが動き出した。

## 議論の流れ

### 1. 価値の認識
- shareNOTEで実証されたLambda + API Gateway + DynamoDB構成
- 「またゼロからCDK書くのか...」問題の解決
- スモールスタート原則に最適な基盤

### 2. 重要な学びの結晶化

#### 環境変数の一元管理
「ローカル開発時の.envとGitHub Actionsのsecretを両者で一致させるという方法は、見逃しがち・サボりがちな部分」

この指摘から、以下の仕組みを設計：
- `.env.schema.yml`による定義の一元化
- 自動チェックスクリプト
- PRテンプレートでの確認項目

#### デプロイ戦略の進化
「現状では、数々の失敗から全スタックを一律更新する形でのデプロイを標準としている」

そして環境別戦略へ：
- **開発環境**: 速度優先の差分デプロイ 🚀
- **本番環境**: 確実性優先の完全デプロイ 🛡️

### 3. S3の追加
「S3が抜けてると思うよ」

シンプルだが重要な指摘。Lambda + API Gateway + DynamoDB + S3の黄金構成が完成。

## スモールスタートの決断

### 開発準備度評価: 85%
- コア機能定義: ★★★★☆
- 技術的実現性: ★★★★★（shareNOTEで実証済み）
- 差別化要素: ★★★★★
- ユーザー価値: ★★★★☆
- 実装リスク: ★☆☆☆☆

「準備度85%なら行っちゃえばいいかw」

## プロジェクト開始

```
場所は../serverless-cdk で
```

そして誕生：https://github.com/goodsun/serverless-cdk

## 学んだこと

1. **完璧より実行** - 85%で十分、使いながら改善
2. **実践から生まれる価値** - shareNOTEの成功体験が次の基盤に
3. **見落としがちな部分こそ重要** - 環境変数管理のような地味だが重要な機能
4. **環境別の最適化** - 開発効率と本番の確実性の両立

## これから

MVPを2-3時間で作成し、実際に使いながら改善していく。shareNOTEで学んだ全てが、次のプロジェクトの高速化につながる。

スモールスタート原則の、また一つの実践例が始まった。